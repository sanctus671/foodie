(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{BEPN:function(t,o,n){"use strict";n.d(o,"a",(function(){return e}));var i=n("mrSG"),a=n("fXoL"),e=function(){function t(){}return t.prototype.getClosestCity=function(t,o,n){var a,e,r,l,c=this.getCities();try{for(var p=Object(i.d)(c),s=p.next();!s.done;s=p.next())if(t.indexOf((b=s.value).city)>-1)return b.city}catch(f){a={error:f}}finally{try{s&&!s.done&&(e=p.return)&&e.call(p)}finally{if(a)throw a.error}}var u="Auckland";try{for(var g=Object(i.d)(c),d=g.next();!d.done;d=g.next()){var b;this.latLngDist((b=d.value).lat,b.lng,o,n)<99999&&(u=b.city)}}catch(m){r={error:m}}finally{try{d&&!d.done&&(l=g.return)&&l.call(g)}finally{if(r)throw r.error}}return u},t.prototype.latLngDist=function(t,o,n,i){function a(t){return t*Math.PI/180}return function(t,o,n,i){t=a(t),n=a(n),o=a(o);var e=((i=a(i))-o)*Math.cos((t+n)/2),r=n-t;return 3959*Math.sqrt(e*e+r*r)}(t,o,n,i)},t.prototype.getCities=function(){return[{city:"Auckland",admin:"",country:"New Zealand",population_proper:"395982",iso2:"NZ",capital:"",lat:"-36.866667",lng:"174.766667",population:"1377200",image:"http://www.backpackerbus.co.nz/wp-content/uploads/Auckland-Harbour-at-night.jpg"},{city:"Wellington",admin:"",country:"New Zealand",population_proper:"393400",iso2:"NZ",capital:"primary",lat:"-41.3",lng:"174.783333",population:"393400",image:"https://img.theculturetrip.com/768x432/wp-content/uploads/2017/01/wellington_city_at_dusk.jpg"},{city:"Christchurch",admin:"Canterbury",country:"New Zealand",population_proper:"363200",iso2:"NZ",capital:"",lat:"-43.533333",lng:"172.633333",population:"363200",image:"https://live.staticflickr.com/4027/4708156945_4d948687de_b.jpg"},{city:"Waitakere",admin:"",country:"New Zealand",population_proper:"208100",iso2:"NZ",capital:"",lat:"-36.85",lng:"174.55",population:"208100",image:"https://www.newzealand.com/assets/Tourism-NZ/Auckland/3641051356/img-1536924181-5046-5833-44E76CBE-E486-BBC9-804410866EE48326__FocalPointCropWzQyNyw2NDAsNTYsNTAsODUsImpwZyIsNjUsMi41XQ.jpg"},{city:"Northcote",admin:"",country:"New Zealand",population_proper:"205605",iso2:"NZ",capital:"",lat:"-36.815278",lng:"174.745833",population:"205605",image:"https://www.northcote.school.nz/media/images/13717872918a66a079731248e792151869065398cb.jpg"},{city:"Hamilton",admin:"",country:"New Zealand",population_proper:"148200",iso2:"NZ",capital:"",lat:"-37.783333",lng:"175.283333",population:"148200",image:"https://www.lyndalee.co.nz/images/418423/hamilton-city-night.jpg"},{city:"Tauranga",admin:"",country:"New Zealand",population_proper:"121500",iso2:"NZ",capital:"",lat:"-37.686111",lng:"176.166667",population:"121500",image:"https://upload.wikimedia.org/wikipedia/commons/4/45/Tauranga_at_night.jpg"},{city:"Dunedin",admin:"Otago",country:"New Zealand",population_proper:"117700",iso2:"NZ",capital:"",lat:"-45.866667",lng:"170.5",population:"117700",image:"https://i.pinimg.com/originals/d6/79/41/d6794134ba5c30b2cb9a9129f647d464.jpg"},{city:"Lower Hutt",admin:"",country:"New Zealand",population_proper:"102400",iso2:"NZ",capital:"",lat:"-41.216667",lng:"174.916667",population:"102400",image:"http://gabisworld.com/data_images/top_cityes/lower-hutt/lower-hutt-01.jpg"},{city:"Palmerston North",admin:"",country:"New Zealand",population_proper:"82400",iso2:"NZ",capital:"",lat:"-40.35",lng:"175.616667",population:"82400",image:"https://pix10.agoda.net/hotelImages/108/108616/108616_14062508110020015006.jpg"},{city:"Nelson",admin:"Nelson",country:"New Zealand",population_proper:"60800",iso2:"NZ",capital:"",lat:"-41.273459",lng:"173.282347",population:"60800",image:"https://www.newzealand.com/assets/Tourism-NZ/Nelson/c3fb763d4a/img-1536011461-3107-3327-2724284081_c1802f9e75_o__FocalPointCropWzQyNyw2NDAsNjQsMzAsODUsImpwZyIsNjUsMi41XQ.jpg"},{city:"Napier",admin:"",country:"New Zealand",population_proper:"57800",iso2:"NZ",capital:"",lat:"-39.483333",lng:"176.916667",population:"57800",image:"https://cdn.newzealandnow.govt.nz/sites/default/files/styles/carousel_images/public/field-uploads/Hawke%27s-Bay-Napier-sound-shell.jpg?itok=DUKrxyr5"},{city:"Porirua",admin:"",country:"New Zealand",population_proper:"52500",iso2:"NZ",capital:"",lat:"-41.133333",lng:"174.833333",population:"52500",image:"https://www.aa.co.nz/assets/NEW-AA-TRAVELLER/EDITORIAL-LOCATIONS/Porirua/_resampled/ScaleWidthWyI3OTUiXQ/Looking-over-Porirua-at-sunset.jpg?m=1518187581?m=1518187581"},{city:"New Plymouth",admin:"",country:"New Zealand",population_proper:"52500",iso2:"NZ",capital:"",lat:"-39.066667",lng:"174.083333",population:"52500",image:"https://www.newzealand.com/assets/Tourism-NZ/Taranaki/d959ecee13/img-1536905168-3686-29020-A179AA59-FF95-B4A2-CC3356A1DE9B9492__FocalPointCropWzQyMCw5NjAsNDgsMzcsNzUsImpwZyIsNjUsMi41XQ.jpg"},{city:"Invercargill",admin:"Southland",country:"New Zealand",population_proper:"49200",iso2:"NZ",capital:"",lat:"-46.428681",lng:"168.361596",population:"49200",image:"https://icc.govt.nz/wp-content/uploads/2019/03/Invercargill-banner-560x250.jpg"},{city:"Wanganui",admin:"",country:"New Zealand",population_proper:"43200",iso2:"NZ",capital:"",lat:"-39.933333",lng:"175.05",population:"43200",image:"https://www.salvationarmy.org.nz/sites/default/files/styles/hero_image/public/city/image/20130710Wanganuiareapic.jpg?itok=iLigeEnq"},{city:"Gisborne",admin:"",country:"New Zealand",population_proper:"34300",iso2:"NZ",capital:"",lat:"-38.653333",lng:"178.004167",population:"34300",image:"https://farm1.staticflickr.com/763/32776550765_a6dc255a65_o.jpg"},{city:"Timaru",admin:"Canterbury",country:"New Zealand",population_proper:"27200",iso2:"NZ",capital:"",lat:"-44.398444",lng:"171.255194",population:"27200",image:"https://resources.stuff.co.nz/content/dam/images/1/q/m/x/2/d/image.related.StuffLandscapeSixteenByNine.710x400.1qi41a.png/1530592019629.jpg"},{city:"Pukekohe",admin:"",country:"New Zealand",population_proper:"26300",iso2:"NZ",capital:"",lat:"-37.2",lng:"174.95",population:"26300",image:"https://www.osbornerealty.co.nz/pages/237/userfiles/pukekohe%20aerial.jpg"},{city:"Paraparaumu",admin:"",country:"New Zealand",population_proper:"25263",iso2:"NZ",capital:"",lat:"-40.9",lng:"174.983333",population:"25263",image:"https://static2.stuff.co.nz/1346027988/474/7555474.jpg"},{city:"Taupo",admin:"",country:"New Zealand",population_proper:"22600",iso2:"NZ",capital:"",lat:"-38.683333",lng:"176.083333",population:"22600",image:"https://farmersweekly.co.nz/assets/uploaded-files/2019-07/Taupo-flat.jpg"},{city:"Masterton",admin:"",country:"New Zealand",population_proper:"20200",iso2:"NZ",capital:"",lat:"-40.959722",lng:"175.6575",population:"20200",image:"https://cdn.britannica.com/23/143923-050-6F0F239D/Masterton-North-Island-NZ.jpg"},{city:"Levin",admin:"",country:"New Zealand",population_proper:"19550",iso2:"NZ",capital:"",lat:"-40.633333",lng:"175.275",population:"19550",image:"http://www.nzonline.org.nz/images/uploaded/regions/1330302294_large.jpg"},{city:"Whakatane",admin:"",country:"New Zealand",population_proper:"18700",iso2:"NZ",capital:"",lat:"-37.983333",lng:"177.0",population:"18700",image:"https://i.pinimg.com/originals/91/c9/b3/91c9b39eb3aa369012ed9202060dedb3.jpg"},{city:"Tokoroa",admin:"",country:"New Zealand",population_proper:"13350",iso2:"NZ",capital:"",lat:"-38.233333",lng:"175.866667",population:"13350",image:"https://tokoroaweather.net/images/tokoroa_town.jpg"},{city:"Hawera",admin:"",country:"New Zealand",population_proper:"11100",iso2:"NZ",capital:"",lat:"-39.591667",lng:"174.283333",population:"11100",image:"https://www.southtaranaki.com/ProcessImage/uploaded_images/Community%20Development/Hawera%20Sunset%20And%20Mount.jpg?w=530"},{city:"Greymouth",admin:"West Coast",country:"New Zealand",population_proper:"10100",iso2:"NZ",capital:"",lat:"-42.451111",lng:"171.206778",population:"10100",image:"https://www.newzealand.com/assets/Tourism-NZ/Other/46d75c4f00/img-1536964234-1122-17411-p-B5895D9C-BCD8-3537-83CECEFBF310F29A-2544003__FocalPointCropWzQyNyw2NDAsNTAsNTAsODUsImpwZyIsNjUsMi41XQ.jpg"},{city:"Thames",admin:"",country:"New Zealand",population_proper:"6756",iso2:"NZ",capital:"",lat:"-37.133333",lng:"175.533333",population:"6756"},{city:"Kerikeri",admin:"",country:"New Zealand",population_proper:"5856",iso2:"NZ",capital:"",lat:"-35.216667",lng:"173.966667",population:"5856"},{city:"Wanaka",admin:"Otago",country:"New Zealand",population_proper:"5037",iso2:"NZ",capital:"",lat:"-44.709755",lng:"169.129417",population:"5037"},{city:"Westport",admin:"West Coast",country:"New Zealand",population_proper:"3900",iso2:"NZ",capital:"",lat:"-41.752685",lng:"171.583402",population:"3900"},{city:"Turangi",admin:"",country:"New Zealand",population_proper:"3240",iso2:"NZ",capital:"",lat:"-39.0",lng:"175.933333",population:"3240"},{city:"Hokitika",admin:"West Coast",country:"New Zealand",population_proper:"3078",iso2:"NZ",capital:"",lat:"-42.717214",lng:"170.963713",population:"3078"},{city:"Waioruarangi",admin:"",country:"New Zealand",population_proper:"2172",iso2:"NZ",capital:"",lat:"-42.4",lng:"173.683333",population:"2172"},{city:"Te Anau",admin:"Southland",country:"New Zealand",population_proper:"1857",iso2:"NZ",capital:"",lat:"-45.414649",lng:"167.715672",population:"1857"},{city:"Waitangi",admin:"",country:"New Zealand",population_proper:"300",iso2:"NZ",capital:"",lat:"-43.95",lng:"-176.533333",population:"300"}]},t.\u0275prov=a.Db({token:t,factory:t.\u0275fac=function(o){return new(o||t)},providedIn:"root"}),t}()},IY3H:function(t,o,n){"use strict";n.d(o,"a",(function(){return k}));var i=n("mrSG"),a=n("AytR"),e=n("fXoL"),r=n("tyNb"),l=n("B7Rs"),c=n("a/9d"),p=n("TEn/"),s=n("ri4K"),u=n("BEPN"),g=n("P12i"),d=n("itIa"),b=n("3Pt+"),f=n("ofXK");function m(t,o){1&t&&e.Ib(0,"ion-icon",24)}function h(t,o){if(1&t&&(e.Kb(0,"ion-avatar",25),e.Ib(1,"img",26),e.Jb()),2&t){var n=e.Ub();e.xb(1),e.Xb("src",n.location.image,e.dc)}}function y(t,o){1&t&&e.Ib(0,"ion-icon",27)}function w(t,o){if(1&t&&(e.Kb(0,"ion-avatar",25),e.Ib(1,"img",26),e.Jb()),2&t){var n=e.Ub();e.xb(1),e.Xb("src",n.location.logo,e.dc)}}function _(t,o){if(1&t&&(e.Kb(0,"ion-select-option",28),e.gc(1),e.Jb()),2&t){var n=o.$implicit;e.Xb("value",n.city),e.xb(1),e.hc(n.city)}}function N(t,o){if(1&t&&(e.Kb(0,"ion-select-option",28),e.gc(1),e.Jb()),2&t){var n=o.$implicit;e.Xb("value",n.id),e.xb(1),e.hc(n.name)}}function Z(t,o){if(1&t&&(e.Kb(0,"p",29),e.gc(1),e.Jb()),2&t){var n=e.Ub();e.xb(1),e.hc(n.location.error)}}function v(t,o){1&t&&e.Ib(0,"ion-icon",30)}function C(t,o){1&t&&e.Ib(0,"ion-spinner")}var k=function(){function t(t,o,n,i,a,e,r,l,c,p,s,u){this.router=t,this.transfer=o,this.camera=n,this.loadingController=i,this.alertController=a,this.modalController=e,this.navController=r,this.authenticationService=l,this.navParams=c,this.cityService=p,this.locationService=s,this.nativeGeocoder=u,this.location={categories:[],categoriesIds:[]},this.cities=[],this.setCities(),this.categories=[],this.getCategories()}return t.prototype.ngOnInit=function(){},t.prototype.dismiss=function(){this.modalController.dismiss()},t.prototype.getCategories=function(){var t=this;this.locationService.getCategories().then((function(o){t.categories=o,t.categories.unshift({name:"Any"})})).catch((function(){}))},t.prototype.changeImage=function(t){var o=this;this.camera.getPicture({sourceType:this.camera.PictureSourceType.PHOTOLIBRARY,destinationType:this.camera.DestinationType.FILE_URI,encodingType:this.camera.EncodingType.JPEG,quality:25}).then((function(n){var i;o.loadingController.create({message:"Your image is being uploaded. Please wait...",duration:2e4}).then((function(t){i=t,t.present()}));var e=o.transfer.create(),r={fileKey:"media_file",fileName:Math.random().toString(36).substring(2),params:{},mimeType:"image/jpeg"};e.upload(n,encodeURI(a.a.apiUrl+"/upload"),r).then((function(n){if(n.response){var a=JSON.parse(n.response);o.location[t]=a.file}i.dismiss()}),(function(t){o.alertController.create({header:"Error",subHeader:"There was a problem uploading your image",message:JSON.stringify(t),buttons:[{text:"Dismiss",role:"cancel"}]}).then((function(t){t.present()})),i.dismiss()}))}),(function(t){}))},t.prototype.save=function(){this.location.categories=this.location.categoriesIds,this.modalController.dismiss({location:this.location})},t.prototype.cityChanged=function(){var t,o;if(this.location.latitude&&this.location.longitude)try{for(var n=Object(i.d)(this.cities),a=n.next();!a.done;a=n.next()){var e=a.value;e.city===this.location.city&&(this.location.latitude=e.lat,this.location.longitude=e.lng)}}catch(r){t={error:r}}finally{try{a&&!a.done&&(o=n.return)&&o.call(n)}finally{if(t)throw t.error}}},t.prototype.addressChanged=function(){var t=this;this.nativeGeocoder.forwardGeocode(this.location.address,{useLocale:!0,maxResults:1}).then((function(o){"NZ"===o[0].countryCode&&(t.location.latitude=o[0].latitude,t.location.longitude=o[0].longitude)})).catch((function(t){return console.log(t)}))},t.prototype.setCities=function(){this.cities=this.cityService.getCities()},t.\u0275fac=function(o){return new(o||t)(e.Hb(r.g),e.Hb(l.a),e.Hb(c.a),e.Hb(p.N),e.Hb(p.a),e.Hb(p.O),e.Hb(p.P),e.Hb(s.a),e.Hb(p.Q),e.Hb(u.a),e.Hb(g.a),e.Hb(d.a))},t.\u0275cmp=e.Bb({type:t,selectors:[["app-list-location"]],decls:59,vars:17,consts:[["color","primary"],["slot","start"],[3,"click"],["name","close"],[1,"edit-location"],[1,"edit-location__form"],["position","floating"],["clearInput","","type","email",3,"ngModel","ngModelChange"],[1,"edit-location__form__avatar"],["name","business-outline",4,"ngIf"],["item-start","",4,"ngIf"],["size","small","color","primary",3,"click"],["name","color-palette-outline",4,"ngIf"],["clearInput","","type","text",3,"ngModel","ngModelChange"],["clearInput","","type","text",3,"ngModel","ngModelChange","ionBlur"],[3,"ngModel","ngModelChange","ionChange"],[3,"value",4,"ngFor","ngForOf"],["multiple","true",3,"ngModel","ngModelChange"],["clearInput","",3,"ngModel","ngModelChange"],["class","signup__form__error",4,"ngIf"],[1,"create-review-footer"],["color","primary","expand","full",1,"create-review__button",3,"click"],["name","arrow-forward",4,"ngIf"],[4,"ngIf"],["name","business-outline"],["item-start",""],[3,"src"],["name","color-palette-outline"],[3,"value"],[1,"signup__form__error"],["name","arrow-forward"]],template:function(t,o){1&t&&(e.Kb(0,"ion-header"),e.Kb(1,"ion-toolbar",0),e.Kb(2,"ion-buttons",1),e.Kb(3,"ion-button",2),e.Sb("click",(function(){return o.dismiss()})),e.Ib(4,"ion-icon",3),e.Jb(),e.Jb(),e.Kb(5,"ion-title"),e.gc(6,"List Venue"),e.Jb(),e.Jb(),e.Jb(),e.Kb(7,"ion-content",4),e.Kb(8,"ion-list",5),e.Kb(9,"ion-item"),e.Kb(10,"ion-label",6),e.gc(11,"Name"),e.Jb(),e.Kb(12,"ion-input",7),e.Sb("ngModelChange",(function(t){return o.location.name=t})),e.Jb(),e.Jb(),e.Kb(13,"ion-item",8),e.fc(14,m,1,0,"ion-icon",9),e.fc(15,h,2,1,"ion-avatar",10),e.Kb(16,"ion-button",11),e.Sb("click",(function(){return o.changeImage("image")})),e.gc(17,"Select Main Image"),e.Jb(),e.Jb(),e.Kb(18,"ion-item",8),e.fc(19,y,1,0,"ion-icon",12),e.fc(20,w,2,1,"ion-avatar",10),e.Kb(21,"ion-button",11),e.Sb("click",(function(){return o.changeImage("logo")})),e.gc(22,"Select Logo (optional)"),e.Jb(),e.Jb(),e.Kb(23,"ion-item"),e.Kb(24,"ion-label",6),e.gc(25,"Phone"),e.Jb(),e.Kb(26,"ion-input",13),e.Sb("ngModelChange",(function(t){return o.location.phone=t})),e.Jb(),e.Jb(),e.Kb(27,"ion-item"),e.Kb(28,"ion-label",6),e.gc(29,"Address"),e.Jb(),e.Kb(30,"ion-input",14),e.Sb("ngModelChange",(function(t){return o.location.address=t}))("ionBlur",(function(){return o.addressChanged()})),e.Jb(),e.Jb(),e.Kb(31,"ion-item"),e.Kb(32,"ion-label",6),e.gc(33,"City"),e.Jb(),e.Kb(34,"ion-select",15),e.Sb("ngModelChange",(function(t){return o.location.city=t}))("ionChange",(function(){return o.cityChanged()})),e.fc(35,_,2,2,"ion-select-option",16),e.Jb(),e.Jb(),e.Kb(36,"ion-item"),e.Kb(37,"ion-label",6),e.gc(38,"Keywords"),e.Jb(),e.Kb(39,"ion-select",17),e.Sb("ngModelChange",(function(t){return o.location.categoriesIds=t})),e.fc(40,N,2,2,"ion-select-option",16),e.Jb(),e.Jb(),e.Kb(41,"ion-item"),e.Kb(42,"ion-label",6),e.gc(43,"Description"),e.Jb(),e.Kb(44,"ion-textarea",18),e.Sb("ngModelChange",(function(t){return o.location.description=t})),e.Jb(),e.Jb(),e.Kb(45,"ion-item"),e.Kb(46,"ion-label",6),e.gc(47,"Website (e.g. for bookings)"),e.Jb(),e.Kb(48,"ion-input",13),e.Sb("ngModelChange",(function(t){return o.location.website=t})),e.Jb(),e.Jb(),e.Kb(49,"ion-item"),e.Kb(50,"ion-label",6),e.gc(51,"Link to Menu"),e.Jb(),e.Kb(52,"ion-input",13),e.Sb("ngModelChange",(function(t){return o.location.menu_url=t})),e.Jb(),e.Jb(),e.fc(53,Z,2,1,"p",19),e.Jb(),e.Jb(),e.Kb(54,"ion-footer",20),e.Kb(55,"ion-button",21),e.Sb("click",(function(){return o.save()})),e.gc(56," Submit Location\xa0\xa0 "),e.fc(57,v,1,0,"ion-icon",22),e.fc(58,C,1,0,"ion-spinner",23),e.Jb(),e.Jb()),2&t&&(e.xb(12),e.Xb("ngModel",o.location.name),e.xb(2),e.Xb("ngIf",!o.location.image),e.xb(1),e.Xb("ngIf",o.location.image),e.xb(4),e.Xb("ngIf",!o.location.logo),e.xb(1),e.Xb("ngIf",o.location.logo),e.xb(6),e.Xb("ngModel",o.location.phone),e.xb(4),e.Xb("ngModel",o.location.address),e.xb(4),e.Xb("ngModel",o.location.city),e.xb(1),e.Xb("ngForOf",o.cities),e.xb(4),e.Xb("ngModel",o.location.categoriesIds),e.xb(1),e.Xb("ngForOf",o.categories),e.xb(4),e.Xb("ngModel",o.location.description),e.xb(4),e.Xb("ngModel",o.location.website),e.xb(4),e.Xb("ngModel",o.location.menu_url),e.xb(1),e.Xb("ngIf",o.location.error),e.xb(4),e.Xb("ngIf",!o.location.loading),e.xb(1),e.Xb("ngIf",o.location.loading))},directives:[p.l,p.K,p.i,p.h,p.m,p.I,p.j,p.s,p.q,p.r,p.p,p.U,b.d,b.g,f.j,p.A,p.T,f.i,p.G,p.k,p.e,p.B,p.C],styles:[".edit-location[_ngcontent-%COMP%]   .edit-location__form__avatar[_ngcontent-%COMP%]{margin-top:5px;margin-bottom:5px}.edit-location[_ngcontent-%COMP%]   .edit-location__form__avatar[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{width:20px;height:20px;padding:10px;border-radius:20px;background-color:#f4934d;color:#fff;margin-bottom:5px}.edit-location[_ngcontent-%COMP%]   .edit-location__form__avatar[_ngcontent-%COMP%]   ion-avatar[_ngcontent-%COMP%]{margin-bottom:5px}.edit-location[_ngcontent-%COMP%]   .edit-location__form__avatar[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{margin-left:15px}"]}),t}()},P12i:function(t,o,n){"use strict";n.d(o,"a",(function(){return c}));var i=n("AytR"),a=n("2Vo4"),e=n("fXoL"),r=n("tk/3"),l=n("e8h1"),c=function(){function t(t,o){this.http=t,this.storage=o,this.locationFilters=new a.a(!1)}return t.prototype.getLocationFilters=function(){return this.locationFilters.asObservable()},t.prototype.retreiveLocationFilters=function(){var t=this;this.storage.get("foodie_filters").then((function(o){if(o){var n=JSON.parse(o);t.locationFilters.next(n)}}))},t.prototype.setLocationFilters=function(t){this.storage.set("foodie_filters",JSON.stringify(t)),this.locationFilters.next(t)},t.prototype.getCategories=function(){var t=this;return new Promise((function(o,n){t.storage.get("foodie_token").then((function(a){a?t.http.get(i.a.apiUrl+"/categories?token="+a).subscribe((function(n){t.storage.set("foodie_categories",JSON.stringify(n)),o(n)}),(function(i){t.storage.get("foodie_categories").then((function(t){t?o(JSON.parse(t)):n(i)}))})):n()}))}))},t.prototype.getLocations=function(t,o,n,a,e){var r=this;return new Promise((function(l,c){r.storage.get("foodie_token").then((function(p){p?r.http.get(i.a.apiUrl+"/locations?token="+p+"&category_id="+t+"&latitude="+(o||"")+"&longitude="+(n||"")+"&radius="+(a||"")+"&show_further_away="+(e||"")).subscribe((function(o){r.storage.set("foodie_locations_"+t,JSON.stringify(o)),l(o)}),(function(o){r.storage.get("foodie_locations_"+t).then((function(t){t?l(JSON.parse(t)):c(o)}))})):c()}))}))},t.prototype.getLocationsAdmin=function(){var t=this;return new Promise((function(o,n){t.storage.get("foodie_token").then((function(a){a?t.http.get(i.a.apiUrl+"/locations?token="+a+"&admin=1").subscribe((function(n){t.storage.set("foodie_locations_admin",JSON.stringify(n)),o(n)}),(function(i){t.storage.get("foodie_locations_admin").then((function(t){t?o(JSON.parse(t)):n(i)}))})):n()}))}))},t.prototype.getLocation=function(t){var o=this;return new Promise((function(n,a){o.storage.get("foodie_token").then((function(e){e?o.http.get(i.a.apiUrl+"/locations/"+t+"?token="+e).subscribe((function(i){o.storage.set("foodie_location_"+t,JSON.stringify(i)),n(i)}),(function(i){o.storage.get("foodie_location_"+t).then((function(t){t?n(JSON.parse(t)):a(i)}))})):a()}))}))},t.prototype.createLocation=function(t){var o=this;return new Promise((function(n,a){o.storage.get("foodie_token").then((function(e){e?o.http.post(i.a.apiUrl+"/locations?token="+e,t).subscribe((function(t){n(t)}),(function(t){a(t)})):a()}))}))},t.prototype.updateLocation=function(t){var o=this;return new Promise((function(n,a){o.storage.get("foodie_token").then((function(e){e?o.http.put(i.a.apiUrl+"/locations/"+t.id+"?token="+e,t).subscribe((function(t){n(t)}),(function(t){a(t)})):a()}))}))},t.prototype.createUserLocation=function(t){var o=this;return new Promise((function(n,a){o.storage.get("foodie_token").then((function(e){e?o.http.post(i.a.apiUrl+"/userlocations?token="+e,{location_id:t}).subscribe((function(t){n(t)}),(function(t){a(t)})):a()}))}))},t.\u0275fac=function(o){return new(o||t)(e.Ob(r.a),e.Ob(l.b))},t.\u0275prov=e.Db({token:t,factory:t.\u0275fac,providedIn:"root"}),t}()}}]);