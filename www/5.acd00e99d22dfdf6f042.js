(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{"73jO":function(t,n,e){"use strict";e.r(n),e.d(n,"BrowsePageModule",(function(){return I}));var o=e("ofXK"),r=e("3Pt+"),i=e("TEn/"),s=e("tyNb"),c=e("mrSG"),a=e("fXoL"),g=e("+4c6"),_=function(){function t(t,n,e){this.gestureCtrl=t,this.zone=n,this.platform=e}return t.prototype.useSwiperGesture=function(t){for(var n=function(n){var o=t[n],r=window.innerWidth;e.gestureCtrl.create({el:o.nativeElement,threshold:15,gestureName:"swipte",onStart:function(t){},onMove:function(t){o.nativeElement.style.transform="translateX("+t.deltaX+"px) rotate("+t.deltaX/20+"deg)"},onEnd:function(t){o.nativeElement.style.transition="0.3s ease-out",o.nativeElement.style.transform=t.deltaX>r/2?"translateX("+1.5*r+"px)":t.deltaX<-r/2?"translateX(-"+1.5*r+"px)":""}}).enable(!0)},e=this,o=0;o<t.length;o++)n(o)},t.\u0275fac=function(n){return new(n||t)(a.Ob(i.b),a.Ob(a.z),a.Ob(i.N))},t.\u0275prov=a.Db({token:t,factory:t.\u0275fac,providedIn:"root"}),t}(),b=e("P12i"),u=["locations"];function f(t,n){1&t&&(a.Kb(0,"div",14),a.Ib(1,"ion-spinner",15),a.Jb())}function l(t,n){if(1&t){var e=a.Lb();a.Kb(0,"div",16),a.Sb("click",(function(){a.cc(e);var t=n.$implicit;return a.Ub(2).selectCategory(t)})),a.Ib(1,"ion-ripple-effect"),a.Kb(2,"h5"),a.gc(3),a.Jb(),a.Jb()}if(2&t){var o=n.$implicit;a.xb(3),a.ic(" ",o.name," ")}}function p(t,n){if(1&t&&(a.Kb(0,"div",10),a.Kb(1,"h4"),a.gc(2,"what do you feel like eating today?"),a.Jb(),a.fc(3,f,2,0,"div",11),a.Kb(4,"div",12),a.fc(5,l,4,1,"div",13),a.Jb(),a.Jb()),2&t){var e=a.Ub();a.xb(3),a.Xb("ngIf",e.loadingCategories),a.xb(2),a.Xb("ngForOf",e.categories)}}function d(t,n){1&t&&(a.Kb(0,"div",21),a.Ib(1,"ion-spinner",22),a.Jb())}function h(t,n){1&t&&(a.Kb(0,"h3"),a.gc(1,"Matched!"),a.Jb())}function w(t,n){if(1&t&&(a.Kb(0,"h4"),a.gc(1),a.Jb()),2&t){var e=a.Ub().$implicit,o=a.Ub(3);a.xb(1),a.hc(o.showCategories(e))}}var O=function(t){return[t]},C=function(t,n){return{"background-image":t,"background-color":n}};function m(t,n){if(1&t&&(a.Kb(0,"div",27,28),a.Kb(2,"div",29),a.Kb(3,"h2"),a.gc(4),a.Jb(),a.Jb(),a.Kb(5,"div",30),a.fc(6,w,2,1,"h4",19),a.Kb(7,"p"),a.Ib(8,"ion-icon",31),a.gc(9),a.Jb(),a.Jb(),a.Jb()),2&t){var e=n.$implicit;a.Xb("routerLink",a.Zb(5,O,"/location/"+e.id)),a.xb(2),a.Xb("ngStyle",a.ac(7,C,"url("+e.image+")",e.image?"#ffffff":"#000000")),a.xb(2),a.hc(e.name),a.xb(2),a.Xb("ngIf",e.categories.length>0),a.xb(3),a.ic(" ",e.city," ")}}function P(t,n){if(1&t){var e=a.Lb();a.Kb(0,"div",32),a.Kb(1,"ion-button",33),a.Sb("click",(function(){return a.cc(e),a.Ub(3).rejectLocation()})),a.Ib(2,"ion-icon",34),a.Jb(),a.Kb(3,"ion-button",33),a.Sb("click",(function(){return a.cc(e),a.Ub(3).matchLocation()})),a.Ib(4,"ion-icon",35),a.Jb(),a.Jb()}}function x(t,n){if(1&t){var e=a.Lb();a.Kb(0,"div",36),a.Kb(1,"ion-button",37),a.Sb("click",(function(){return a.cc(e),a.Ub(3).reset()})),a.gc(2," start over "),a.Jb(),a.Jb()}}function M(t,n){if(1&t&&(a.Kb(0,"div"),a.fc(1,h,2,0,"h3",19),a.fc(2,m,10,10,"div",23),a.Ib(3,"div",24),a.fc(4,P,5,0,"div",25),a.fc(5,x,3,0,"div",26),a.Jb()),2&t){var e=a.Ub(2);a.xb(1),a.Xb("ngIf",e.matched),a.xb(1),a.Xb("ngForOf",e.locations),a.xb(2),a.Xb("ngIf",!e.matched),a.xb(1),a.Xb("ngIf",e.matched)}}function v(t,n){if(1&t){var e=a.Lb();a.Kb(0,"div",38),a.Ib(1,"ion-icon",31),a.Kb(2,"p"),a.gc(3,"No more locations"),a.Jb(),a.Kb(4,"ion-button",39),a.Sb("click",(function(){return a.cc(e),a.Ub(2).reset()})),a.gc(5,"Start Over"),a.Jb(),a.Jb()}}function y(t,n){if(1&t&&(a.Kb(0,"div",17),a.fc(1,d,2,0,"div",18),a.fc(2,M,6,4,"div",19),a.fc(3,v,6,0,"div",20),a.Jb()),2&t){var e=a.Ub();a.xb(1),a.Xb("ngIf",e.loadingLocations),a.xb(1),a.Xb("ngIf",!e.loadingLocations&&e.locations.length>0),a.xb(1),a.Xb("ngIf",!e.loadingLocations&&e.locations.length<1)}}var k=function(){return["/notifications"]},J=[{path:"",component:function(){function t(t,n,e,o,r,i){this.gestureService=t,this.locationService=n,this.gestureCtrl=e,this.ngZone=o,this.modalController=r,this.platform=i,this.stage=1,this.categories=[],this.locations=[],this.getCategories()}return t.prototype.ngOnInit=function(){},t.prototype.ngAfterViewInit=function(){},t.prototype.getCategories=function(){var t=this;this.loadingCategories=!0,this.locationService.getCategories().then((function(n){t.categories=n,t.categories.unshift({name:"Any"}),t.loadingCategories=!1})).catch((function(){}))},t.prototype.selectCategory=function(t){var n=this,e=t.id?t.id:"";this.stage=2,this.loadingLocations=!0,this.locationService.getLocations(e).then((function(t){n.locations=t,n.loadingLocations=!1,setTimeout((function(){var t=n.locationCards.toArray();n.useSwiperGesture(t)}),500)})).catch((function(){n.loadingLocations=!1}))},t.prototype.showCategories=function(t){var n,e,o="";try{for(var r=Object(c.d)(t.categories),i=r.next();!i.done;i=r.next())o+=i.value.name+", "}catch(s){n={error:s}}finally{try{i&&!i.done&&(e=r.return)&&e.call(r)}finally{if(n)throw n.error}}return o.replace(/,\s*$/,"")},t.prototype.doRefresh=function(t){var n=this;setTimeout((function(){n.reset(),t.target.complete()}),1e3)},t.prototype.reset=function(){var t=this;this.stage=1,this.matched=!1,this.locations=[],this.locationService.getCategories().then((function(n){t.categories=n,t.categories.unshift({name:"Any"})}))},t.prototype.matchLocation=function(){var t=this;this.matched=!1,this.ngZone.run((function(){var n=t.locations[t.locations.length-1];t.matched=!0,t.locationService.createUserLocation(n.id).then((function(){})),t.showMatch(n)}))},t.prototype.rejectLocation=function(){var t=this;this.matched=!1,setTimeout((function(){t.ngZone.run((function(){t.locations.pop()}))}),400)},t.prototype.showMatch=function(t){return Object(c.a)(this,void 0,void 0,(function(){return Object(c.c)(this,(function(n){switch(n.label){case 0:return[4,this.modalController.create({component:g.a,componentProps:{location:t}})];case 1:return[4,n.sent().present()];case 2:return n.sent(),[2]}}))}))},t.prototype.useSwiperGesture=function(t){for(var n=this,e=function(e){var r=t[e],i=window.innerWidth;o.gestureCtrl.create({el:r.nativeElement,threshold:0,gestureName:"swipte",onStart:function(t){},onMove:function(t){r.nativeElement.style.transform="translateX("+t.deltaX+"px) rotate("+t.deltaX/20+"deg)"},onEnd:function(t){r.nativeElement.style.transition="0.3s ease-out",t.deltaX>i/4?(r.nativeElement.style.transform="translateX("+1.5*i+"px)",n.matchLocation(),setTimeout((function(){r.nativeElement.style.transform="none"}),500)):t.deltaX<-i/4?(r.nativeElement.style.transform="translateX(-"+1.5*i+"px)",n.rejectLocation()):r.nativeElement.style.transform=""}}).enable(!0)},o=this,r=0;r<t.length;r++)e(r)},t.\u0275fac=function(n){return new(n||t)(a.Hb(_),a.Hb(b.a),a.Hb(i.b),a.Hb(a.z),a.Hb(i.K),a.Hb(i.N))},t.\u0275cmp=a.Bb({type:t,selectors:[["app-browse"]],viewQuery:function(t,n){var e;1&t&&a.kc(u,!0,a.l),2&t&&a.bc(e=a.Tb())&&(n.locationCards=e)},decls:12,vars:7,consts:[[1,"browse-header"],[3,"color"],["src","assets/Foodie_Logo_NT_OrangeDark.svg"],["slot","end"],["routerDirection","forward",3,"routerLink"],["slot","icon-only","name","notifications-outline",3,"color"],[1,"browse",3,"color"],["slot","fixed",3,"ionRefresh"],["class","browse__categories",4,"ngIf"],["class","browse__resturants",4,"ngIf"],[1,"browse__categories"],["class","browse__categories__loading",4,"ngIf"],[1,"browse__categories__rows"],["class","browse__categories__rows__category ion-activatable ripple-parent",3,"click",4,"ngFor","ngForOf"],[1,"browse__categories__loading"],["color","light"],[1,"browse__categories__rows__category","ion-activatable","ripple-parent",3,"click"],[1,"browse__resturants"],["class","browse__resturants__loading",4,"ngIf"],[4,"ngIf"],["class","browse__resturants__empty",4,"ngIf"],[1,"browse__resturants__loading"],["color","primary"],["class","browse__resturant resturant","routerDirection","forward",3,"routerLink",4,"ngFor","ngForOf"],[1,"browse__resturant-spacer"],["class","browse__resturants__actions",4,"ngIf"],["class","browse__resturants__start-over",4,"ngIf"],["routerDirection","forward",1,"browse__resturant","resturant",3,"routerLink"],["locations",""],[1,"resturant__header",3,"ngStyle"],[1,"resturant__details"],["name","location-outline"],[1,"browse__resturants__actions"],["size","large","color","light","shape","round",3,"click"],["name","close-outline","slot","icon-only","color","primary"],["name","heart-outline","slot","icon-only","color","primary"],[1,"browse__resturants__start-over"],["size","large","color","primary","shape","round",3,"click"],[1,"browse__resturants__empty"],["color","primary","fill","clear",3,"click"]],template:function(t,n){1&t&&(a.Kb(0,"ion-header",0),a.Kb(1,"ion-toolbar",1),a.Kb(2,"ion-title"),a.Ib(3,"img",2),a.Jb(),a.Kb(4,"ion-buttons",3),a.Kb(5,"ion-button",4),a.Ib(6,"ion-icon",5),a.Jb(),a.Jb(),a.Jb(),a.Jb(),a.Kb(7,"ion-content",6),a.Kb(8,"ion-refresher",7),a.Sb("ionRefresh",(function(t){return n.doRefresh(t)})),a.Ib(9,"ion-refresher-content"),a.Jb(),a.fc(10,p,6,2,"div",8),a.fc(11,y,4,3,"div",9),a.Jb()),2&t&&(a.xb(1),a.Xb("color",1===n.stage?"secondary":"light"),a.xb(4),a.Xb("routerLink",a.Yb(6,k)),a.xb(1),a.Xb("color",1===n.stage?"light":"medium"),a.xb(1),a.Xb("color",1===n.stage?"secondary":"light"),a.xb(3),a.Xb("ngIf",1===n.stage),a.xb(1),a.Xb("ngIf",2===n.stage))},directives:[i.k,i.G,i.F,i.h,i.g,i.O,s.h,i.l,i.i,i.u,i.v,o.j,o.i,i.A,i.w,o.k],styles:["img[_ngcontent-%COMP%]{height:250px}.browse-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{border-bottom:1px solid #f3f3f3}.browse-header.header-ios[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{padding-top:6px;padding-bottom:6px;border-bottom:none;--border-color:#f3f3f3;--border-width:0 0 1px}.browse-header.header-ios[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   ion-title[_ngcontent-%COMP%]{padding-left:20px;text-align:left}.browse-header[_ngcontent-%COMP%]:after{background-image:none}.browse-header[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100px;height:26.73px}.browse[_ngcontent-%COMP%]   .browse__categories[_ngcontent-%COMP%]{padding:0 20px}.browse[_ngcontent-%COMP%]   .browse__categories[_ngcontent-%COMP%]   .browse__categories__loading[_ngcontent-%COMP%]{text-align:center;margin-top:60px;margin-bottom:60px}.browse[_ngcontent-%COMP%]   .browse__categories[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:20px;font-weight:700;max-width:250px;margin-bottom:30px;color:#f3934d;margin-top:60px}.browse[_ngcontent-%COMP%]   .browse__categories[_ngcontent-%COMP%]   .browse__categories__rows[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}.browse[_ngcontent-%COMP%]   .browse__categories[_ngcontent-%COMP%]   .browse__categories__rows[_ngcontent-%COMP%]   .browse__categories__rows__category[_ngcontent-%COMP%]{width:95px;height:95px;background-color:#f4934d;border-radius:47.5px;margin:5px;overflow:hidden;position:relative;display:flex;align-items:center;text-align:center}.browse[_ngcontent-%COMP%]   .browse__categories[_ngcontent-%COMP%]   .browse__categories__rows[_ngcontent-%COMP%]   .browse__categories__rows__category[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{color:#fff;margin:0;font-size:14px;font-weight:600;width:100%}.browse[_ngcontent-%COMP%]   .browse__resturants[_ngcontent-%COMP%]{margin-top:30px;margin-left:15px;margin-right:15px;position:relative}.browse[_ngcontent-%COMP%]   .browse__resturants[_ngcontent-%COMP%]   .browse__resturants__loading[_ngcontent-%COMP%]{text-align:center;margin-top:60px;margin-bottom:60px}.browse[_ngcontent-%COMP%]   .browse__resturants[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{position:absolute;top:0;right:15px;z-index:1;background-color:#f4934d;color:#fff;padding:10px 20px;font-size:18px;border-radius:20px}.browse[_ngcontent-%COMP%]   .browse__resturants[_ngcontent-%COMP%]   .resturant[_ngcontent-%COMP%], .browse[_ngcontent-%COMP%]   .browse__resturants[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]{margin:auto;display:block;position:absolute;width:100%;left:0;height:-webkit-fit-content;height:-moz-fit-content;height:fit-content;transition:transform .3s ease-out}.browse[_ngcontent-%COMP%]   .browse__resturants[_ngcontent-%COMP%]   .browse__resturant-spacer[_ngcontent-%COMP%]{height:360px}.browse[_ngcontent-%COMP%]   .browse__resturants[_ngcontent-%COMP%]   .browse__resturants__empty[_ngcontent-%COMP%]{text-align:center;margin-top:60px;margin-bottom:60px}.browse[_ngcontent-%COMP%]   .browse__resturants[_ngcontent-%COMP%]   .browse__resturants__empty[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:#666;font-size:40px}.browse[_ngcontent-%COMP%]   .browse__resturants[_ngcontent-%COMP%]   .browse__resturants__empty[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666}.browse[_ngcontent-%COMP%]   .browse__resturants[_ngcontent-%COMP%]   .resturant[_ngcontent-%COMP%]{box-shadow:none;height:390px;background-color:#fff;background:#fff!important}.browse[_ngcontent-%COMP%]   .browse__resturants[_ngcontent-%COMP%]   .resturant[_ngcontent-%COMP%]   .resturant__header[_ngcontent-%COMP%]{padding:250px 30px 20px;border-radius:20px;background-size:cover;background-position:50%;background-repeat:no-repeat}.browse[_ngcontent-%COMP%]   .browse__resturants[_ngcontent-%COMP%]   .resturant[_ngcontent-%COMP%]   .resturant__header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-weight:700;font-size:18px;color:#fff;margin:0}.browse[_ngcontent-%COMP%]   .browse__resturants[_ngcontent-%COMP%]   .resturant[_ngcontent-%COMP%]   .resturant__details[_ngcontent-%COMP%]{text-align:center;margin-top:25px}.browse[_ngcontent-%COMP%]   .browse__resturants[_ngcontent-%COMP%]   .resturant[_ngcontent-%COMP%]   .resturant__details[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#c3c3c3;font-size:18px}.browse[_ngcontent-%COMP%]   .browse__resturants[_ngcontent-%COMP%]   .resturant[_ngcontent-%COMP%]   .resturant__details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#c3c3c3;font-size:13px;margin-top:20px}.browse[_ngcontent-%COMP%]   .browse__resturants[_ngcontent-%COMP%]   .resturant[_ngcontent-%COMP%]   .resturant__details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{vertical-align:top;margin-top:2px;margin-right:2px}.browse[_ngcontent-%COMP%]   .browse__resturants[_ngcontent-%COMP%]   .browse__resturants__actions[_ngcontent-%COMP%]{text-align:Center;margin-top:35px}.browse[_ngcontent-%COMP%]   .browse__resturants[_ngcontent-%COMP%]   .browse__resturants__actions[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{width:60px;height:60px;--padding-start:0px;--padding-end:0px;border:1px solid #f3f3f3;border-radius:30px;--box-shadow:2px 2px 10px 2px #ececec;margin:0 15px}.browse[_ngcontent-%COMP%]   .browse__resturants[_ngcontent-%COMP%]   .browse__resturants__start-over[_ngcontent-%COMP%]{text-align:center;padding-left:15px;padding-right:15px;padding-bottom:30px;margin-top:30px}.browse[_ngcontent-%COMP%]   .browse__resturants[_ngcontent-%COMP%]   .browse__resturants__start-over[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--box-shadow:none!important;text-transform:none;font-size:18px;font-weight:600;letter-spacing:normal;--padding-start:34px;--padding-end:34px}"]}),t}()}],X=function(){function t(){}return t.\u0275mod=a.Fb({type:t}),t.\u0275inj=a.Eb({factory:function(n){return new(n||t)},imports:[[s.j.forChild(J)],s.j]}),t}(),I=function(){function t(){}return t.\u0275mod=a.Fb({type:t}),t.\u0275inj=a.Eb({factory:function(n){return new(n||t)},imports:[[o.b,r.a,i.H,X]]}),t}()},P12i:function(t,n,e){"use strict";e.d(n,"a",(function(){return c}));var o=e("AytR"),r=e("fXoL"),i=e("tk/3"),s=e("e8h1"),c=function(){function t(t,n){this.http=t,this.storage=n}return t.prototype.getCategories=function(){var t=this;return new Promise((function(n,e){t.storage.get("foodie_token").then((function(r){r?t.http.get(o.a.apiUrl+"/categories?token="+r).subscribe((function(e){t.storage.set("foodie_categories",JSON.stringify(e)),n(e)}),(function(o){t.storage.get("foodie_categories").then((function(t){t?n(JSON.parse(t)):e(o)}))})):e()}))}))},t.prototype.getLocations=function(t){var n=this;return new Promise((function(e,r){n.storage.get("foodie_token").then((function(i){i?n.http.get(o.a.apiUrl+"/locations?token="+i+"&category_id="+t).subscribe((function(o){n.storage.set("foodie_locations_"+t,JSON.stringify(o)),e(o)}),(function(o){n.storage.get("foodie_locations_"+t).then((function(t){t?e(JSON.parse(t)):r(o)}))})):r()}))}))},t.prototype.getLocation=function(t){var n=this;return new Promise((function(e,r){n.storage.get("foodie_token").then((function(i){i?n.http.get(o.a.apiUrl+"/locations/"+t+"?token="+i).subscribe((function(o){n.storage.set("foodie_location_"+t,JSON.stringify(o)),e(o)}),(function(o){n.storage.get("foodie_location_"+t).then((function(t){t?e(JSON.parse(t)):r(o)}))})):r()}))}))},t.prototype.createLocation=function(t){var n=this;return new Promise((function(e,r){n.storage.get("foodie_token").then((function(i){i?n.http.post(o.a.apiUrl+"/locations?token="+i,t).subscribe((function(t){e(t)}),(function(t){r(t)})):r()}))}))},t.prototype.updateLocation=function(t){var n=this;return new Promise((function(e,r){n.storage.get("foodie_token").then((function(i){i?n.http.put(o.a.apiUrl+"/locations/"+t.id+"?token="+i,t).subscribe((function(t){e(t)}),(function(t){r(t)})):r()}))}))},t.prototype.createUserLocation=function(t){var n=this;return new Promise((function(e,r){n.storage.get("foodie_token").then((function(i){i?n.http.post(o.a.apiUrl+"/userlocations?token="+i,{location_id:t}).subscribe((function(t){e(t)}),(function(t){r(t)})):r()}))}))},t.\u0275fac=function(n){return new(n||t)(r.Ob(i.a),r.Ob(s.b))},t.\u0275prov=r.Db({token:t,factory:t.\u0275fac,providedIn:"root"}),t}()}}]);