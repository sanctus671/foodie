(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{P12i:function(t,n,o){"use strict";o.d(n,"a",(function(){return s}));var e=o("AytR"),i=o("2Vo4"),a=o("fXoL"),c=o("tk/3"),r=o("e8h1"),s=function(){function t(t,n){this.http=t,this.storage=n,this.locationFilters=new i.a(!1)}return t.prototype.getLocationFilters=function(){return this.locationFilters.asObservable()},t.prototype.retreiveLocationFilters=function(){var t=this;this.storage.get("foodie_filters").then((function(n){if(n){var o=JSON.parse(n);t.locationFilters.next(o)}}))},t.prototype.setLocationFilters=function(t){this.storage.set("foodie_filters",JSON.stringify(t)),this.locationFilters.next(t)},t.prototype.getCategories=function(){var t=this;return new Promise((function(n,o){t.storage.get("foodie_token").then((function(i){i?t.http.get(e.a.apiUrl+"/categories?token="+i).subscribe((function(o){t.storage.set("foodie_categories",JSON.stringify(o)),n(o)}),(function(e){t.storage.get("foodie_categories").then((function(t){t?n(JSON.parse(t)):o(e)}))})):o()}))}))},t.prototype.getLocations=function(t,n,o,i,a){var c=this;return new Promise((function(r,s){c.storage.get("foodie_token").then((function(l){l?c.http.get(e.a.apiUrl+"/locations?token="+l+"&category_id="+t+"&latitude="+(n||"")+"&longitude="+(o||"")+"&radius="+(i||"")+"&show_further_away="+(a||"")).subscribe((function(n){c.storage.set("foodie_locations_"+t,JSON.stringify(n)),r(n)}),(function(n){c.storage.get("foodie_locations_"+t).then((function(t){t?r(JSON.parse(t)):s(n)}))})):s()}))}))},t.prototype.getLocationsAdmin=function(){var t=this;return new Promise((function(n,o){t.storage.get("foodie_token").then((function(i){i?t.http.get(e.a.apiUrl+"/locations?token="+i+"&admin=1").subscribe((function(o){t.storage.set("foodie_locations_admin",JSON.stringify(o)),n(o)}),(function(e){t.storage.get("foodie_locations_admin").then((function(t){t?n(JSON.parse(t)):o(e)}))})):o()}))}))},t.prototype.getLocation=function(t){var n=this;return new Promise((function(o,i){n.storage.get("foodie_token").then((function(a){a?n.http.get(e.a.apiUrl+"/locations/"+t+"?token="+a).subscribe((function(e){n.storage.set("foodie_location_"+t,JSON.stringify(e)),o(e)}),(function(e){n.storage.get("foodie_location_"+t).then((function(t){t?o(JSON.parse(t)):i(e)}))})):i()}))}))},t.prototype.createLocation=function(t){var n=this;return new Promise((function(o,i){n.storage.get("foodie_token").then((function(a){a?n.http.post(e.a.apiUrl+"/locations?token="+a,t).subscribe((function(t){o(t)}),(function(t){i(t)})):i()}))}))},t.prototype.updateLocation=function(t){var n=this;return new Promise((function(o,i){n.storage.get("foodie_token").then((function(a){a?n.http.put(e.a.apiUrl+"/locations/"+t.id+"?token="+a,t).subscribe((function(t){o(t)}),(function(t){i(t)})):i()}))}))},t.prototype.createUserLocation=function(t){var n=this;return new Promise((function(o,i){n.storage.get("foodie_token").then((function(a){a?n.http.post(e.a.apiUrl+"/userlocations?token="+a,{location_id:t}).subscribe((function(t){o(t)}),(function(t){i(t)})):i()}))}))},t.\u0275fac=function(n){return new(n||t)(a.Ob(c.a),a.Ob(r.b))},t.\u0275prov=a.Db({token:t,factory:t.\u0275fac,providedIn:"root"}),t}()},QIXZ:function(t,n,o){"use strict";o.r(n),o.d(n,"ManageLocationsPageModule",(function(){return v}));var e=o("ofXK"),i=o("3Pt+"),a=o("TEn/"),c=o("tyNb"),r=o("fXoL"),s=o("P12i");function l(t,n){1&t&&(r.Kb(0,"div",7),r.Ib(1,"ion-spinner",0),r.Jb())}function u(t,n){1&t&&(r.Kb(0,"div",8),r.Ib(1,"ion-icon",9),r.Kb(2,"h2"),r.gc(3,"No Locations"),r.Jb(),r.Jb())}function f(t,n){if(1&t&&(r.Kb(0,"ion-avatar",1),r.Ib(1,"img",15),r.Jb()),2&t){var o=r.Ub().$implicit;r.xb(1),r.Xb("src",o.logo,r.dc)}}function g(t,n){1&t&&(r.Kb(0,"strong"),r.gc(1,"(Declined)"),r.Jb())}function p(t,n){if(1&t){var o=r.Lb();r.Kb(0,"ion-button",19),r.Sb("click",(function(t){r.cc(o);var n=r.Ub(2).$implicit;return r.Ub().declineLocation(t,n)})),r.gc(1,"Decline"),r.Jb()}}function b(t,n){if(1&t){var o=r.Lb();r.Kb(0,"div",16),r.Kb(1,"ion-button",17),r.Sb("click",(function(t){r.cc(o);var n=r.Ub().$implicit;return r.Ub().approveLocation(t,n)})),r.gc(2,"Approve"),r.Jb(),r.fc(3,p,2,0,"ion-button",18),r.Jb()}if(2&t){var e=r.Ub().$implicit;r.xb(3),r.Xb("ngIf","declined"!==e.status)}}var d=function(t){return[t]};function h(t,n){if(1&t&&(r.Kb(0,"ion-item",10),r.fc(1,f,2,1,"ion-avatar",11),r.Kb(2,"ion-label",12),r.Kb(3,"h2"),r.gc(4),r.fc(5,g,2,0,"strong",13),r.Jb(),r.Kb(6,"p"),r.gc(7),r.Jb(),r.fc(8,b,4,1,"div",14),r.Jb(),r.Jb()),2&t){var o=n.$implicit;r.Xb("routerLink",r.Zb(7,d,"/location/"+o.id))("detail","pending"!==o.status),r.xb(1),r.Xb("ngIf",o.logo),r.xb(3),r.ic(" ",o.name," "),r.xb(1),r.Xb("ngIf","declined"===o.status),r.xb(2),r.hc(o.description),r.xb(1),r.Xb("ngIf","pending"===o.status||"declined"===o.status)}}var m=[{path:"",component:function(){function t(t,n,o){this.locationService=t,this.alertController=n,this.toastController=o,this.locations=[],this.getLocations()}return t.prototype.ngOnInit=function(){},t.prototype.getLocations=function(){var t=this;this.loading=!0,this.locationService.getLocationsAdmin().then((function(n){console.log(n),t.locations=n,t.loading=!1})).catch((function(){t.loading=!1}))},t.prototype.approveLocation=function(t,n){var o=this;t.preventDefault(),t.stopPropagation(),this.alertController.create({header:"Are Your Sure?",subHeader:"Your are about to approve "+n.name,message:"By approving this location, they will be visible by all users of the app.",buttons:[{text:"Cancel",role:"cancel"},{text:"Approve Location",handler:function(){o.locationService.updateLocation({id:n.id,status:"approved"}).then((function(){o.toastController.create({message:"Location approved",duration:2e3}).then((function(t){t.present()})),n.status="approved"}))}}]}).then((function(t){t.present()}))},t.prototype.declineLocation=function(t,n){var o=this;t.preventDefault(),t.stopPropagation(),this.alertController.create({header:"Are Your Sure?",subHeader:"Your are about to decline "+n.name,message:"By declining this location, their application will be rejected and they will not be listed within the app.",buttons:[{text:"Cancel",role:"cancel"},{text:"Decline Location",handler:function(){o.locationService.updateLocation({id:n.id,status:"declined"}).then((function(){o.toastController.create({message:"Location declined",duration:2e3}).then((function(t){t.present()})),n.status="declined"}))}}]}).then((function(t){t.present()}))},t.\u0275fac=function(n){return new(n||t)(r.Hb(s.a),r.Hb(a.a),r.Hb(a.V))},t.\u0275cmp=r.Bb({type:t,selectors:[["app-manage-locations"]],decls:11,vars:3,consts:[["color","primary"],["slot","start"],["defaultHref","/tabs/settings"],[1,"manage-locations"],["class","manage-locations__loading",4,"ngIf"],["class","manage-locations__empty",4,"ngIf"],["routerDirection","forward",3,"routerLink","detail",4,"ngFor","ngForOf"],[1,"manage-locations__loading"],[1,"manage-locations__empty"],["name","business-outline"],["routerDirection","forward",3,"routerLink","detail"],["slot","start",4,"ngIf"],[1,"ion-text-wrap"],[4,"ngIf"],["class","actions",4,"ngIf"],[3,"src"],[1,"actions"],["fill","clear",3,"click"],["fill","clear","color","danger",3,"click",4,"ngIf"],["fill","clear","color","danger",3,"click"]],template:function(t,n){1&t&&(r.Kb(0,"ion-header"),r.Kb(1,"ion-toolbar",0),r.Kb(2,"ion-buttons",1),r.Kb(3,"ion-button"),r.Ib(4,"ion-back-button",2),r.Jb(),r.Jb(),r.Kb(5,"ion-title"),r.gc(6,"Manage Locations"),r.Jb(),r.Jb(),r.Jb(),r.Kb(7,"ion-content",3),r.fc(8,l,2,0,"div",4),r.fc(9,u,4,0,"div",5),r.fc(10,h,9,9,"ion-item",6),r.Jb()),2&t&&(r.xb(8),r.Xb("ngIf",n.loading),r.xb(1),r.Xb("ngIf",n.locations.length<1&&!n.loading),r.xb(1),r.Xb("ngForOf",n.locations))},directives:[a.l,a.K,a.i,a.h,a.f,a.g,a.I,a.j,e.j,e.i,a.C,a.m,a.q,a.S,c.h,a.r,a.e],styles:[".manage-locations[_ngcontent-%COMP%]   .manage-locations__loading[_ngcontent-%COMP%]{text-align:center;margin-top:60px}.manage-locations[_ngcontent-%COMP%]   .manage-locations__empty[_ngcontent-%COMP%]{text-align:center;opacity:.2;padding-top:60px;padding-bottom:60px}.manage-locations[_ngcontent-%COMP%]   .manage-locations__empty[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:60px}.manage-locations[_ngcontent-%COMP%]   .manage-locations__empty[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:5px 0 0;font-size:22px}.manage-locations[_ngcontent-%COMP%]   .manage-locations__rating[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:#f3cd00}.manage-locations[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{margin-top:10px}"]}),t}()}],_=function(){function t(){}return t.\u0275mod=r.Fb({type:t}),t.\u0275inj=r.Eb({factory:function(n){return new(n||t)},imports:[[c.j.forChild(m)],c.j]}),t}(),v=function(){function t(){}return t.\u0275mod=r.Fb({type:t}),t.\u0275inj=r.Eb({factory:function(n){return new(n||t)},imports:[[e.b,i.a,a.L,_]]}),t}()}}]);