(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{BEPN:function(t,o,i){"use strict";i.d(o,"a",(function(){return a}));var n=i("mrSG"),e=i("fXoL"),a=function(){function t(){}return t.prototype.getClosestCity=function(t,o,i){var e,a,r,l,p=this.getCities();try{for(var c=Object(n.d)(p),s=c.next();!s.done;s=c.next())if(t.indexOf((f=s.value).city)>-1)return f.city}catch(y){e={error:y}}finally{try{s&&!s.done&&(a=c.return)&&a.call(c)}finally{if(e)throw e.error}}var u="Auckland";try{for(var g=Object(n.d)(p),d=g.next();!d.done;d=g.next()){var f;this.latLngDist((f=d.value).lat,f.lng,o,i)<99999&&(u=f.city)}}catch(h){r={error:h}}finally{try{d&&!d.done&&(l=g.return)&&l.call(g)}finally{if(r)throw r.error}}return u},t.prototype.latLngDist=function(t,o,i,n){function e(t){return t*Math.PI/180}return function(t,o,i,n){t=e(t),i=e(i),o=e(o);var a=((n=e(n))-o)*Math.cos((t+i)/2),r=i-t;return 3959*Math.sqrt(a*a+r*r)}(t,o,i,n)},t.prototype.getCities=function(){return[{city:"Auckland",admin:"",country:"New Zealand",population_proper:"395982",iso2:"NZ",capital:"",lat:"-36.866667",lng:"174.766667",population:"1377200",image:"http://www.backpackerbus.co.nz/wp-content/uploads/Auckland-Harbour-at-night.jpg"},{city:"Wellington",admin:"",country:"New Zealand",population_proper:"393400",iso2:"NZ",capital:"primary",lat:"-41.3",lng:"174.783333",population:"393400",image:"https://img.theculturetrip.com/768x432/wp-content/uploads/2017/01/wellington_city_at_dusk.jpg"},{city:"Christchurch",admin:"Canterbury",country:"New Zealand",population_proper:"363200",iso2:"NZ",capital:"",lat:"-43.533333",lng:"172.633333",population:"363200",image:"https://live.staticflickr.com/4027/4708156945_4d948687de_b.jpg"},{city:"Waitakere",admin:"",country:"New Zealand",population_proper:"208100",iso2:"NZ",capital:"",lat:"-36.85",lng:"174.55",population:"208100",image:"https://www.newzealand.com/assets/Tourism-NZ/Auckland/3641051356/img-1536924181-5046-5833-44E76CBE-E486-BBC9-804410866EE48326__FocalPointCropWzQyNyw2NDAsNTYsNTAsODUsImpwZyIsNjUsMi41XQ.jpg"},{city:"Northcote",admin:"",country:"New Zealand",population_proper:"205605",iso2:"NZ",capital:"",lat:"-36.815278",lng:"174.745833",population:"205605",image:"https://www.northcote.school.nz/media/images/13717872918a66a079731248e792151869065398cb.jpg"},{city:"Hamilton",admin:"",country:"New Zealand",population_proper:"148200",iso2:"NZ",capital:"",lat:"-37.783333",lng:"175.283333",population:"148200",image:"https://www.lyndalee.co.nz/images/418423/hamilton-city-night.jpg"},{city:"Tauranga",admin:"",country:"New Zealand",population_proper:"121500",iso2:"NZ",capital:"",lat:"-37.686111",lng:"176.166667",population:"121500",image:"https://upload.wikimedia.org/wikipedia/commons/4/45/Tauranga_at_night.jpg"},{city:"Dunedin",admin:"Otago",country:"New Zealand",population_proper:"117700",iso2:"NZ",capital:"",lat:"-45.866667",lng:"170.5",population:"117700",image:"https://i.pinimg.com/originals/d6/79/41/d6794134ba5c30b2cb9a9129f647d464.jpg"},{city:"Lower Hutt",admin:"",country:"New Zealand",population_proper:"102400",iso2:"NZ",capital:"",lat:"-41.216667",lng:"174.916667",population:"102400",image:"http://gabisworld.com/data_images/top_cityes/lower-hutt/lower-hutt-01.jpg"},{city:"Palmerston North",admin:"",country:"New Zealand",population_proper:"82400",iso2:"NZ",capital:"",lat:"-40.35",lng:"175.616667",population:"82400",image:"https://pix10.agoda.net/hotelImages/108/108616/108616_14062508110020015006.jpg"},{city:"Nelson",admin:"Nelson",country:"New Zealand",population_proper:"60800",iso2:"NZ",capital:"",lat:"-41.273459",lng:"173.282347",population:"60800",image:"https://www.newzealand.com/assets/Tourism-NZ/Nelson/c3fb763d4a/img-1536011461-3107-3327-2724284081_c1802f9e75_o__FocalPointCropWzQyNyw2NDAsNjQsMzAsODUsImpwZyIsNjUsMi41XQ.jpg"},{city:"Napier",admin:"",country:"New Zealand",population_proper:"57800",iso2:"NZ",capital:"",lat:"-39.483333",lng:"176.916667",population:"57800",image:"https://cdn.newzealandnow.govt.nz/sites/default/files/styles/carousel_images/public/field-uploads/Hawke%27s-Bay-Napier-sound-shell.jpg?itok=DUKrxyr5"},{city:"Porirua",admin:"",country:"New Zealand",population_proper:"52500",iso2:"NZ",capital:"",lat:"-41.133333",lng:"174.833333",population:"52500",image:"https://www.aa.co.nz/assets/NEW-AA-TRAVELLER/EDITORIAL-LOCATIONS/Porirua/_resampled/ScaleWidthWyI3OTUiXQ/Looking-over-Porirua-at-sunset.jpg?m=1518187581?m=1518187581"},{city:"New Plymouth",admin:"",country:"New Zealand",population_proper:"52500",iso2:"NZ",capital:"",lat:"-39.066667",lng:"174.083333",population:"52500",image:"https://www.newzealand.com/assets/Tourism-NZ/Taranaki/d959ecee13/img-1536905168-3686-29020-A179AA59-FF95-B4A2-CC3356A1DE9B9492__FocalPointCropWzQyMCw5NjAsNDgsMzcsNzUsImpwZyIsNjUsMi41XQ.jpg"},{city:"Invercargill",admin:"Southland",country:"New Zealand",population_proper:"49200",iso2:"NZ",capital:"",lat:"-46.428681",lng:"168.361596",population:"49200",image:"https://icc.govt.nz/wp-content/uploads/2019/03/Invercargill-banner-560x250.jpg"},{city:"Wanganui",admin:"",country:"New Zealand",population_proper:"43200",iso2:"NZ",capital:"",lat:"-39.933333",lng:"175.05",population:"43200",image:"https://www.salvationarmy.org.nz/sites/default/files/styles/hero_image/public/city/image/20130710Wanganuiareapic.jpg?itok=iLigeEnq"},{city:"Gisborne",admin:"",country:"New Zealand",population_proper:"34300",iso2:"NZ",capital:"",lat:"-38.653333",lng:"178.004167",population:"34300",image:"https://farm1.staticflickr.com/763/32776550765_a6dc255a65_o.jpg"},{city:"Timaru",admin:"Canterbury",country:"New Zealand",population_proper:"27200",iso2:"NZ",capital:"",lat:"-44.398444",lng:"171.255194",population:"27200",image:"https://resources.stuff.co.nz/content/dam/images/1/q/m/x/2/d/image.related.StuffLandscapeSixteenByNine.710x400.1qi41a.png/1530592019629.jpg"},{city:"Pukekohe",admin:"",country:"New Zealand",population_proper:"26300",iso2:"NZ",capital:"",lat:"-37.2",lng:"174.95",population:"26300",image:"https://www.osbornerealty.co.nz/pages/237/userfiles/pukekohe%20aerial.jpg"},{city:"Paraparaumu",admin:"",country:"New Zealand",population_proper:"25263",iso2:"NZ",capital:"",lat:"-40.9",lng:"174.983333",population:"25263",image:"https://static2.stuff.co.nz/1346027988/474/7555474.jpg"},{city:"Taupo",admin:"",country:"New Zealand",population_proper:"22600",iso2:"NZ",capital:"",lat:"-38.683333",lng:"176.083333",population:"22600",image:"https://farmersweekly.co.nz/assets/uploaded-files/2019-07/Taupo-flat.jpg"},{city:"Masterton",admin:"",country:"New Zealand",population_proper:"20200",iso2:"NZ",capital:"",lat:"-40.959722",lng:"175.6575",population:"20200",image:"https://cdn.britannica.com/23/143923-050-6F0F239D/Masterton-North-Island-NZ.jpg"},{city:"Levin",admin:"",country:"New Zealand",population_proper:"19550",iso2:"NZ",capital:"",lat:"-40.633333",lng:"175.275",population:"19550",image:"http://www.nzonline.org.nz/images/uploaded/regions/1330302294_large.jpg"},{city:"Whakatane",admin:"",country:"New Zealand",population_proper:"18700",iso2:"NZ",capital:"",lat:"-37.983333",lng:"177.0",population:"18700",image:"https://i.pinimg.com/originals/91/c9/b3/91c9b39eb3aa369012ed9202060dedb3.jpg"},{city:"Tokoroa",admin:"",country:"New Zealand",population_proper:"13350",iso2:"NZ",capital:"",lat:"-38.233333",lng:"175.866667",population:"13350",image:"https://tokoroaweather.net/images/tokoroa_town.jpg"},{city:"Hawera",admin:"",country:"New Zealand",population_proper:"11100",iso2:"NZ",capital:"",lat:"-39.591667",lng:"174.283333",population:"11100",image:"https://www.southtaranaki.com/ProcessImage/uploaded_images/Community%20Development/Hawera%20Sunset%20And%20Mount.jpg?w=530"},{city:"Greymouth",admin:"West Coast",country:"New Zealand",population_proper:"10100",iso2:"NZ",capital:"",lat:"-42.451111",lng:"171.206778",population:"10100",image:"https://www.newzealand.com/assets/Tourism-NZ/Other/46d75c4f00/img-1536964234-1122-17411-p-B5895D9C-BCD8-3537-83CECEFBF310F29A-2544003__FocalPointCropWzQyNyw2NDAsNTAsNTAsODUsImpwZyIsNjUsMi41XQ.jpg"},{city:"Thames",admin:"",country:"New Zealand",population_proper:"6756",iso2:"NZ",capital:"",lat:"-37.133333",lng:"175.533333",population:"6756"},{city:"Kerikeri",admin:"",country:"New Zealand",population_proper:"5856",iso2:"NZ",capital:"",lat:"-35.216667",lng:"173.966667",population:"5856"},{city:"Wanaka",admin:"Otago",country:"New Zealand",population_proper:"5037",iso2:"NZ",capital:"",lat:"-44.709755",lng:"169.129417",population:"5037"},{city:"Westport",admin:"West Coast",country:"New Zealand",population_proper:"3900",iso2:"NZ",capital:"",lat:"-41.752685",lng:"171.583402",population:"3900"},{city:"Turangi",admin:"",country:"New Zealand",population_proper:"3240",iso2:"NZ",capital:"",lat:"-39.0",lng:"175.933333",population:"3240"},{city:"Hokitika",admin:"West Coast",country:"New Zealand",population_proper:"3078",iso2:"NZ",capital:"",lat:"-42.717214",lng:"170.963713",population:"3078"},{city:"Waioruarangi",admin:"",country:"New Zealand",population_proper:"2172",iso2:"NZ",capital:"",lat:"-42.4",lng:"173.683333",population:"2172"},{city:"Te Anau",admin:"Southland",country:"New Zealand",population_proper:"1857",iso2:"NZ",capital:"",lat:"-45.414649",lng:"167.715672",population:"1857"},{city:"Waitangi",admin:"",country:"New Zealand",population_proper:"300",iso2:"NZ",capital:"",lat:"-43.95",lng:"-176.533333",population:"300"}]},t.\u0275prov=e.Db({token:t,factory:t.\u0275fac=function(o){return new(o||t)},providedIn:"root"}),t}()},McSc:function(t,o,i){"use strict";i.r(o),i.d(o,"FiltersPageModule",(function(){return h}));var n=i("ofXK"),e=i("3Pt+"),a=i("TEn/"),r=i("tyNb"),l=i("mrSG"),p=i("fXoL"),c=i("ri4K"),s=i("BEPN"),u=i("Ao8F"),g=i("P12i");function d(t,o){if(1&t&&(p.Kb(0,"ion-select-option",15),p.gc(1),p.Jb()),2&t){var i=o.$implicit;p.Xb("value",i.city),p.xb(1),p.hc(i.city)}}var f=[{path:"",component:function(){function t(t,o,i,n,e){this.authenticationService=t,this.cityService=o,this.geolocation=i,this.navController=n,this.locationService=e,this.profile={},this.cities=[],this.setCities()}return t.prototype.ngOnInit=function(){},t.prototype.ionViewDidEnter=function(){var t=this;this.authenticationService.getUserData().subscribe((function(o){t.user=o,Object.assign(t.profile,o.profile)}))},t.prototype.cityChanged=function(){var t,o;try{for(var i=Object(l.d)(this.cities),n=i.next();!n.done;n=i.next()){var e=n.value;e.city===this.profile.city&&(this.profile.latitude=e.lat,this.profile.longitude=e.lng)}}catch(a){t={error:a}}finally{try{n&&!n.done&&(o=i.return)&&o.call(i)}finally{if(t)throw t.error}}},t.prototype.setCities=function(){this.cities=this.cityService.getCities()},t.prototype.getCurrentLocation=function(){var t=this;this.geolocation.getCurrentPosition().then((function(o){t.profile.latitude=o.coords.latitude,t.profile.longitude=o.coords.longitude})).catch((function(t){}))},t.prototype.save=function(){var t=this;this.locationService.setLocationFilters({city:this.profile.city,latitude:this.profile.latitude,longitude:this.profile.longitude,radius:this.profile.radius,show_further_away:this.profile.show_further_away}),this.authenticationService.updateProfile(this.profile).then((function(){t.authenticationService.retreiveUserData(),t.navController.back()}))},t.\u0275fac=function(o){return new(o||t)(p.Hb(c.a),p.Hb(s.a),p.Hb(u.a),p.Hb(a.P),p.Hb(g.a))},t.\u0275cmp=p.Bb({type:t,selectors:[["app-filters"]],decls:36,vars:8,consts:[["color","primary"],["slot","start"],["defaultHref","/tabs/browse"],[1,"location-settings"],["position","floating"],[3,"ngModel","ngModelChange","ionChange"],[3,"value",4,"ngFor","ngForOf"],[1,"location-settings__gps",3,"click"],["type","text",3,"ngModel","ngModelChange"],[1,"location-settings__radius-label"],["lines","none"],["color","primary","min","10","max","150","step","10",3,"ngModel","ngModelChange"],[3,"ngModel","ngModelChange"],[1,"signup-footer"],["color","primary","expand","full",1,"signup-footer__button",3,"disabled","click"],[3,"value"]],template:function(t,o){1&t&&(p.Kb(0,"ion-header"),p.Kb(1,"ion-toolbar",0),p.Kb(2,"ion-buttons",1),p.Kb(3,"ion-button"),p.Ib(4,"ion-back-button",2),p.Jb(),p.Jb(),p.Kb(5,"ion-title"),p.gc(6,"Location Settings"),p.Jb(),p.Jb(),p.Jb(),p.Kb(7,"ion-content",3),p.Kb(8,"ion-list"),p.Kb(9,"ion-item"),p.Kb(10,"ion-label",4),p.gc(11,"City"),p.Jb(),p.Kb(12,"ion-select",5),p.Sb("ngModelChange",(function(t){return o.profile.city=t}))("ionChange",(function(){return o.cityChanged()})),p.fc(13,d,2,2,"ion-select-option",6),p.Jb(),p.Jb(),p.Kb(14,"a",7),p.Sb("click",(function(){return o.getCurrentLocation()})),p.gc(15,"Get my current location"),p.Jb(),p.Kb(16,"ion-item"),p.Kb(17,"ion-label",4),p.gc(18,"Latitude"),p.Jb(),p.Kb(19,"ion-input",8),p.Sb("ngModelChange",(function(t){return o.profile.latitude=t})),p.Jb(),p.Jb(),p.Kb(20,"ion-item"),p.Kb(21,"ion-label",4),p.gc(22,"Longitude"),p.Jb(),p.Kb(23,"ion-input",8),p.Sb("ngModelChange",(function(t){return o.profile.longitude=t})),p.Jb(),p.Jb(),p.Kb(24,"div",9),p.Kb(25,"span"),p.gc(26),p.Jb(),p.Jb(),p.Kb(27,"ion-item",10),p.Kb(28,"ion-range",11),p.Sb("ngModelChange",(function(t){return o.profile.radius=t})),p.Jb(),p.Jb(),p.Kb(29,"ion-item"),p.Kb(30,"ion-label"),p.gc(31,"See people slightly further away if I run out"),p.Jb(),p.Kb(32,"ion-toggle",12),p.Sb("ngModelChange",(function(t){return o.profile.show_further_away=t})),p.Jb(),p.Jb(),p.Jb(),p.Jb(),p.Kb(33,"ion-footer",13),p.Kb(34,"ion-button",14),p.Sb("click",(function(){return o.save()})),p.gc(35," Save "),p.Jb(),p.Jb()),2&t&&(p.xb(12),p.Xb("ngModel",o.profile.city),p.xb(1),p.Xb("ngForOf",o.cities),p.xb(6),p.Xb("ngModel",o.profile.latitude),p.xb(4),p.Xb("ngModel",o.profile.longitude),p.xb(3),p.ic("Up to ",o.profile.radius," kilometres away"),p.xb(2),p.Xb("ngModel",o.profile.radius),p.xb(4),p.Xb("ngModel",o.profile.show_further_away),p.xb(2),p.Xb("disabled",!o.profile.latitude||!o.profile.longitude))},directives:[a.l,a.K,a.i,a.h,a.f,a.g,a.I,a.j,a.s,a.q,a.r,a.A,a.T,e.d,e.g,n.i,a.p,a.U,a.v,a.J,a.b,a.k,a.B],styles:[".location-settings[_ngcontent-%COMP%]   .location-settings__gps[_ngcontent-%COMP%]{padding-left:20px;padding-right:20px;margin-top:15px;display:block;margin-bottom:10px}.location-settings[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{display:block;white-space:normal}.location-settings[_ngcontent-%COMP%]   .location-settings__radius-label[_ngcontent-%COMP%]{padding-left:20px;padding-right:20px;margin-top:25px;display:block;margin-bottom:0}"]}),t}()}],y=function(){function t(){}return t.\u0275mod=p.Fb({type:t}),t.\u0275inj=p.Eb({factory:function(o){return new(o||t)},imports:[[r.j.forChild(f)],r.j]}),t}(),h=function(){function t(){}return t.\u0275mod=p.Fb({type:t}),t.\u0275inj=p.Eb({factory:function(o){return new(o||t)},imports:[[n.b,e.a,a.L,y]]}),t}()},P12i:function(t,o,i){"use strict";i.d(o,"a",(function(){return p}));var n=i("AytR"),e=i("2Vo4"),a=i("fXoL"),r=i("tk/3"),l=i("e8h1"),p=function(){function t(t,o){this.http=t,this.storage=o,this.locationFilters=new e.a(!1)}return t.prototype.getLocationFilters=function(){return this.locationFilters.asObservable()},t.prototype.retreiveLocationFilters=function(){var t=this;this.storage.get("foodie_filters").then((function(o){if(o){var i=JSON.parse(o);t.locationFilters.next(i)}}))},t.prototype.setLocationFilters=function(t){this.storage.set("foodie_filters",JSON.stringify(t)),this.locationFilters.next(t)},t.prototype.getCategories=function(){var t=this;return new Promise((function(o,i){t.storage.get("foodie_token").then((function(e){e?t.http.get(n.a.apiUrl+"/categories?token="+e).subscribe((function(i){t.storage.set("foodie_categories",JSON.stringify(i)),o(i)}),(function(n){t.storage.get("foodie_categories").then((function(t){t?o(JSON.parse(t)):i(n)}))})):i()}))}))},t.prototype.getLocations=function(t,o,i,e,a){var r=this;return new Promise((function(l,p){r.storage.get("foodie_token").then((function(c){c?r.http.get(n.a.apiUrl+"/locations?token="+c+"&category_id="+t+"&latitude="+(o||"")+"&longitude="+(i||"")+"&radius="+(e||"")+"&show_further_away="+(a||"")).subscribe((function(o){r.storage.set("foodie_locations_"+t,JSON.stringify(o)),l(o)}),(function(o){r.storage.get("foodie_locations_"+t).then((function(t){t?l(JSON.parse(t)):p(o)}))})):p()}))}))},t.prototype.getLocationsAdmin=function(){var t=this;return new Promise((function(o,i){t.storage.get("foodie_token").then((function(e){e?t.http.get(n.a.apiUrl+"/locations?token="+e+"&admin=1").subscribe((function(i){t.storage.set("foodie_locations_admin",JSON.stringify(i)),o(i)}),(function(n){t.storage.get("foodie_locations_admin").then((function(t){t?o(JSON.parse(t)):i(n)}))})):i()}))}))},t.prototype.getLocation=function(t){var o=this;return new Promise((function(i,e){o.storage.get("foodie_token").then((function(a){a?o.http.get(n.a.apiUrl+"/locations/"+t+"?token="+a).subscribe((function(n){o.storage.set("foodie_location_"+t,JSON.stringify(n)),i(n)}),(function(n){o.storage.get("foodie_location_"+t).then((function(t){t?i(JSON.parse(t)):e(n)}))})):e()}))}))},t.prototype.createLocation=function(t){var o=this;return new Promise((function(i,e){o.storage.get("foodie_token").then((function(a){a?o.http.post(n.a.apiUrl+"/locations?token="+a,t).subscribe((function(t){i(t)}),(function(t){e(t)})):e()}))}))},t.prototype.updateLocation=function(t){var o=this;return new Promise((function(i,e){o.storage.get("foodie_token").then((function(a){a?o.http.put(n.a.apiUrl+"/locations/"+t.id+"?token="+a,t).subscribe((function(t){i(t)}),(function(t){e(t)})):e()}))}))},t.prototype.createUserLocation=function(t){var o=this;return new Promise((function(i,e){o.storage.get("foodie_token").then((function(a){a?o.http.post(n.a.apiUrl+"/userlocations?token="+a,{location_id:t}).subscribe((function(t){i(t)}),(function(t){e(t)})):e()}))}))},t.\u0275fac=function(o){return new(o||t)(a.Ob(r.a),a.Ob(l.b))},t.\u0275prov=a.Db({token:t,factory:t.\u0275fac,providedIn:"root"}),t}()}}]);